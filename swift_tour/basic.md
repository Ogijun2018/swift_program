# Swift でプログラミング

## データ型と変数

### 数値型のリテラル

- 10 進数整数では、先頭の文字以外に読みやすいようにアンダーバーをつけても良い。 例: 1_0192_0103
- 数字は 0 から始まっても進数変換されることもない。 例: 0123456
- 16 進数を表す場合は`0x`をつける (アンダーバーは同様に許可)。
- 8 進数を表す場合は`0o`, 2 進数は`0b`
- 10 進数は`e`や`E`を使って 10 のべき乗倍を表すことができる。

### 変数の定義

`var 変数名 :型 =式`

特に理由がなければ型と初期値は宣言するべき。

初期値が指定されており、そのデータ型が明らかであれば型を明記する必要はない。 → **型推論**があるから。

複数の変数名をカンマで区切って記述することもできる。

`var pack: Int = 0, x, y: Int, ram, rem: Double`

Swift では C 言語なら型変換が行われる部分でも厳密にエラーを吐く（例: 混合演算）

比較の場合、整数同士なら異なる型の間でも比較が可能（UInt と Int8 など）。

一方、異なる実数型の間の比較はできない（Double と Float など）。

### 文字列

特殊文字を表すにはバックスラッシュを使う。Unicode の文字コードを直接指定することもできる。

`\()`で式の値を表す文字列をその位置に展開することができる。(**文字列埋め込み**)

### print 関数

キーワード`separator:`をつけた文字列型の引数を渡すことで、複数の表示内容を区切る文字列を指定できる。

`print(6,2014,"りんご", separator:"; ") //"6; 2014; りんご"と表示`

`terminator:`をつけることで一連の表示の最後に表示される文字列を指定できる。

規定値は改行だけからなる文字列なので、改行を含まない文字列に変更することで print を実行後に改行しなくなる。

### 配列要素へのアクセス

配列の要素数は、配列名に続いて`.count`と記述すると得られる。

配列の末尾に新しい要素を加えるには`append`メソッドを用いる。`+, +=`を使ってもかける。

### 演算子

インクリメントやデクリメント演算子は廃止されている。`+=`を基本的に使う。

### 演算子の記述に関する注意

演算子の両側に空白がある or どちらにも空白がない(`a + b` or `a+b`)場合、二項演算子として解釈される。

そうではない場合(`a+ b` or `a +b`)、前置演算子 or 後置演算子として解釈される。

### 識別子

Swift では**キャメルケース**を使う。

大文字開始のキャメルケースは、型名・クラス名などに使用。(`Int Void AnyObject`)

小文字開始のキャメルケースは、メソッド名、変数名などに使用。（`message totalCount`）

Swift では変数名などの識別子に、Unicode も使える（日本語も使える）

## 制御構文

### repeat-while 文

C 言語の do-while 文とおなじ。コードブロックを必ず 1 回実行してから条件に入る。

例: コラッツの問題

```
var n = 7
repeat {
  print("\(n) ", terminator:"") //改行しない
  if n % 2 == 0 {
    n /= 2
  } else {
    n = n * 3 + 1
  }
} while n > 1
print(n)    // 改行して終わり
```

### switch 文

C 言語と違う点

- break が必要ない →case 節が終わったら switch 文から抜ける
  - switch 文から抜けない・次の条件に逆に進みたい時は`fallthrough`を使う
- case の中には何か文がなければならない
- 複数を列挙する場合にはカンマ(,)で区切る
- 複数の case 節が表す条件分岐が重複することがあるが、その場合はより上に書いてあるものが判定される。

### ラベル付きのループ文

ラベルは while 文や for 文の前に、識別子と`:`をおく。

break 文はラベルのつけられたループから抜け出し、そのループの次の別の文の実行に移る。

continue 文はラベルﾉつけられたループの残りの部分の実行をスキップして、次の繰り返しが可能かどうか、条件の判定に移る。

例: カレンダー

```
let days = 31     // 1ヶ月の日数
let firstDay = 2  // 1日目の曜日（0:日曜日）
var w = 0
while w < firstDay {
  print("  ", terminator:"")
  w += 1
}
var d = 1
loop: while true {
  while w < 7 {
    let pad = d < 10 ? " " : "" // 1桁の場合の詰め物
    print(pad + "  \(d)", terminator:"")
    w += 1
    d += 1

    if d > days {
      print()
      break loop    // 31を超えたら改行してループから抜け出す
    }
    print()         // 1週間が終わったら改行してまた日曜日から
    w = 0
  }
}
```

### ラベルつきの if 文、switch 文
